<div class="flex items-center justify-center gap-2 mt-6">
    <UiButton OnClick="GoToFirst"
              Disabled="@(PageNo <= 1)"
              Variant="UiButtonVariant.Outline"
              Size="UiButtonSize.Icon"
              Class="text-slate-500 hover:text-primary-600">
        <i class="fa-solid fa-angles-left text-xs"></i>
    </UiButton>
    
    <UiButton OnClick="GoToPrevious"
              Disabled="@(PageNo <= 1)"
              Variant="UiButtonVariant.Outline"
              Size="UiButtonSize.Icon"
              Class="text-slate-500 hover:text-primary-600">
        <i class="fa-solid fa-chevron-left text-xs"></i>
    </UiButton>

    <div class="flex items-center gap-1">
        @for (int i = StartPage; i <= EndPage; i++)
        {
            var pageIndex = i;
            <UiButton OnClick="() => SelectPage(pageIndex)"
                      Variant="@(PageNo == i ? UiButtonVariant.Default : UiButtonVariant.Outline)"
                      Size="UiButtonSize.Sm"
                      Class="@($"h-10 min-w-[2.5rem] px-2 font-bold text-sm {(PageNo == i ? "shadow-lg shadow-primary-200" : "text-slate-600 hover:text-primary-600")}")">
                @i
            </UiButton>
        }
    </div>

    <UiButton OnClick="GoToNext"
              Disabled="@(PageNo >= PageCount)"
              Variant="UiButtonVariant.Outline"
              Size="UiButtonSize.Icon"
              Class="text-slate-500 hover:text-primary-600">
        <i class="fa-solid fa-chevron-right text-xs"></i>
    </UiButton>
    
    <UiButton OnClick="GoToLast"
              Disabled="@(PageNo >= PageCount)"
              Variant="UiButtonVariant.Outline"
              Size="UiButtonSize.Icon"
              Class="text-slate-500 hover:text-primary-600">
        <i class="fa-solid fa-angles-right text-xs"></i>
    </UiButton>
</div>

@code {
    [Parameter] public int PageNo { get; set; }
    [Parameter] public int PageCount { get; set; }
    [Parameter] public EventCallback<int> SelectedChanged { get; set; }

    private int VisiblePages = 5;

    private int StartPage => Math.Max(1, PageNo - (VisiblePages / 2));
    private int EndPage => Math.Min(PageCount, StartPage + VisiblePages - 1);

    private async Task SelectPage(int page) => await SelectedChanged.InvokeAsync(page);
    private async Task GoToFirst() => await SelectPage(1);
    private async Task GoToLast() => await SelectPage(PageCount);
    private async Task GoToPrevious() => await SelectPage(Math.Max(1, PageNo - 1));
    private async Task GoToNext() => await SelectPage(Math.Min(PageCount, PageNo + 1));
}
